<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <title>Klicka p√• Cirkeln!</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #f5f7fa, #c3cfe2);
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    #score, #ppc, #pps {
      font-size: 1.2rem;
      margin: 4px;
    }

    #gameContainer, #shop {
      width: 85%;
      max-width: 900px;
      background: #ffffffee;
      border-radius: 12px;
      padding: 20px;
      margin-top: 10px;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
    }

    #gameAreaWrapper {
      width: 100%;
      height: 500px;
      border-radius: 12px;
      background-color: #f0f4f8;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #gameArea {
      position: relative;
      width: 95%;
      height: 90%;
      background-color: #ffffff;
      border: 2px solid #aaa;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: inset 0 4px 8px rgba(0,0,0,0.1);
    }

    #circle {
      position: absolute;
      width: 60px;
      height: 60px;
      background-color: #e63946;
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .upgrade-btn {
      padding: 14px 28px;
      margin: 10px;
      border: none;
      border-radius: 12px;
      background-color: #1d3557;
      color: white;
      font-size: 1.4rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      transition: background-color 0.2s;
    }

    .upgrade-btn:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }

    #shop {
      display: none;
      text-align: center;
    }
  </style>
</head>
<body>

<div id="score">Po√§ng: 0</div>
<div id="ppc">Po√§ng/klick: 0</div>
<div id="pps">Po√§ng/sekund: 0</div>

<div id="gameContainer">
  <div id="gameAreaWrapper">
    <div id="gameArea">
      <div id="circle" onclick="hitCircle()"></div>
    </div>
  </div>
  <button 
    class="upgrade-btn" 
    onclick="toggleShop(true)">
    üõçÔ∏è Visa Uppgraderingar
  </button>
</div>

<div id="shop">
  <h2>üõí Uppgraderingar</h2>
  <div id="upgrade-buttons"></div>
  <button class="upgrade-btn" onclick="toggleShop(false)">‚¨Ö Tillbaka</button>
</div>

<script>
  let score = 0, basePoints = 1, multiplier = 1, prestige = 1;
  let autoClickerInterval = null, autoClickerSpeed = 1000, ppsCounter = 0;
  const scoreDisplay = document.getElementById("score");
  const ppcDisplay = document.getElementById("ppc");
  const ppsDisplay = document.getElementById("pps");
  const circle = document.getElementById("circle");
  const gameArea = document.getElementById("gameArea");

  function toggleShop(show) {
    document.getElementById("shop").style.display = show ? "block" : "none";
    document.getElementById("gameContainer").style.display = show ? "none" : "block";
  }

  const upgrades = {
    morePoints: { label: "+1 Po√§ng/klick", price: 100, count: 0 },
    autoClicker: { label: "Autoclicker", price: 10000, bought: false },
    superClick: { label: "Super Klick +50", price: 200000, bought: false },
    tinyArea: { label: "Mindre Spelyta", price: 75000, bought: false },
    multiClick: { label: "+2x Multiklick", price: 90000, bought: false },
    goldenClick: { label: "Guld-klick (100 extra)", price: 120000, bought: false },
    doublePoints: { label: "Dubbel baspo√§ng", price: 150000, bought: false },
    fasterAuto: { label: "Snabbare Auto", price: 85000, bought: false },
    prestigeBoost: { label: "+1 Prestige", price: 200000, bought: false },
    autoBoost: { label: "+5 Po√§ng/sek", price: 95000, bought: false },
    clickStorm: { label: "Klickstorm +200", price: 300000, bought: false },
  };

  function hitCircle() {
    const bonus = (upgrades.superClick.bought ? 50 : 0) +
                  (upgrades.goldenClick.bought ? 100 : 0) +
                  (upgrades.clickStorm.bought ? 200 : 0);
    const base = basePoints + (upgrades.morePoints.count || 0);
    const points = (base + bonus) * multiplier * prestige;
    score += points;
    ppsCounter += points;
    updateUI();
    moveCircle();
  }

  function moveCircle() {
    const maxX = gameArea.clientWidth - circle.offsetWidth;
    const maxY = gameArea.clientHeight - circle.offsetHeight;
    circle.style.left = Math.random() * maxX + "px";
    circle.style.top = Math.random() * maxY + "px";
  }

  function buyUpgrade(key) {
    const u = upgrades[key];
    if (!u || score < u.price) return;
    score -= u.price;

    switch (key) {
      case "morePoints": u.count++; break;
      case "autoClicker":
        if (!u.bought) {
          u.bought = true;
          autoClickerInterval = setInterval(() => {
            const pts = 1 * multiplier * prestige;
            score += pts;
            ppsCounter += pts;
            updateUI();
          }, autoClickerSpeed);
        }
        break;
      case "superClick":
      case "tinyArea":
      case "multiClick":
      case "goldenClick":
      case "doublePoints":
      case "fasterAuto":
      case "prestigeBoost":
      case "autoBoost":
      case "clickStorm":
        u.bought = true;
        if (key === "doublePoints") basePoints *= 2;
        if (key === "multiClick") multiplier *= 2;
        if (key === "prestigeBoost") prestige++;
        if (key === "autoBoost") {
          autoClickerInterval = setInterval(() => {
            const pts = 5 * multiplier * prestige;
            score += pts;
            ppsCounter += pts;
            updateUI();
          }, 1000);
        }
        if (key === "fasterAuto") {
          clearInterval(autoClickerInterval);
          autoClickerInterval = setInterval(() => {
            const pts = 1 * multiplier * prestige;
            score += pts;
            ppsCounter += pts;
            updateUI();
          }, 500);
        }
        if (key === "tinyArea") {
          gameArea.style.height = "50%";
        }
        break;
    }
    updateUI();
    disableButton(key);
  }

  function disableButton(key) {
    const btn = document.getElementById("btn_" + key);
    if (btn) btn.disabled = true;
  }

  function createUpgradeButtons() {
    const container = document.getElementById("upgrade-buttons");
    for (const key in upgrades) {
      const btn = document.createElement("button");
      btn.id = "btn_" + key;
      btn.className = "upgrade-btn";
      btn.onclick = () => buyUpgrade(key);
      btn.innerText = `${upgrades[key].label} (${upgrades[key].price.toLocaleString()} po√§ng)`;
      container.appendChild(btn);
    }
  }

  function updateUI() {
    scoreDisplay.innerText = `Po√§ng: ${Math.floor(score).toLocaleString()}`;
    const bonus = (upgrades.superClick.bought ? 50 : 0) +
                  (upgrades.goldenClick.bought ? 100 : 0) +
                  (upgrades.clickStorm.bought ? 200 : 0);
    const base = basePoints + (upgrades.morePoints.count || 0);
    const pointsPerClick = (base + bonus) * multiplier * prestige;
    ppcDisplay.innerText = `Po√§ng/klick: ${pointsPerClick}`;
    ppsDisplay.innerText = `Po√§ng/sekund: ${ppsLast}`;
    localStorage.setItem("clickerSave", JSON.stringify({ score, prestige, upgrades }));
  }

  function loadGame() {
    const save = localStorage.getItem("clickerSave");
    if (!save) return;
    const data = JSON.parse(save);
    score = data.score || 0;
    prestige = data.prestige || 1;
    Object.assign(upgrades, data.upgrades);
  }

  let ppsLast = 0;
  setInterval(() => {
    ppsLast = ppsCounter;
    ppsCounter = 0;
    updateUI();
  }, 1000);

  // Init
  loadGame();
  createUpgradeButtons();
  updateUI();
  moveCircle();
</script>

</body>
</html>
